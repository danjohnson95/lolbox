!function(t){var o={doc:[],opt:{},html:null,newelement:[],baseOpt:{contents:"",zindex:999,ajax:{use:!1,url:null,method:"get",dataType:"auto",data:null,callback:null},head:{use:!0,close:!0,title:"Title"},foot:{use:!0,close:{use:!0,callback:null,text:"Close"},conf:{use:!0,callback:null,text:"Okay"}}},init:function(t,o){return this.doc=t,this.opt=o,this.destroyAll(),this.parseOptions(),this.html=this.getHTML(),this.doc.find("body").append(this.html),this.element=t.find("#lolbox"),o.ajax.use&&this.parseAjax(),this.registerListeners(),this.open(),t},getElement:function(){return o.element},open:function(){var e,l,n,a,s;l=this.element.find(".lolbox.lolbox-inner"),e=this.element.find(".lolbox.lolbox-outer"),n=t(window).width(),a=l.width(),s=(n-a)/2+"px",e.css("z-index",o.opt.zindex).removeClass("hide"),l.css({"z-index":o.opt.zindex+1,left:s}).removeClass("hide"),setTimeout(function(){e.addClass("show"),l.addClass("show")},100)},registerListeners:function(){var t=this.element;t.find(".lolbox-footer button[data-close]").on("click",o.clickClose),t.find(".lolbox-head div[data-close]").on("click",o.clickClose),t.find(".lolbox-footer button[data-conf]").on("click",o.clickConf)},destroyAll:function(){this.doc.find("#lolbox").off(),this.doc.find("#lolbox").remove()},close:function(t){console.log("close"),this.element.fadeOut(function(){o.destroyAll(),t()})},clickClose:function(){o.close(function(){o.opt.foot.close.callback&&o.opt.foot.close.callback()})},clickConf:function(){o.close(function(){o.opt.foot.conf.callback&&o.opt.foot.conf.callback()})},parseOptions:function(){var o=t.extend({},this.baseOpt,this.opt);o.ajax=t.extend({},this.baseOpt.ajax,this.opt.ajax),o.head=t.extend({},this.baseOpt.head,this.opt.head),o.foot=t.extend({},this.baseOpt.foot,this.opt.foot),console.log(o.ajax),o.ajax.use&&(o.content="<div class='lolbox-load'></div>"),this.opt=o},parseAjax:function(){var e=o.opt;e.content="<div class='lolbox-load'></div>",t.ajax({url:e.ajax.url,method:e.ajax.method,dataType:e.ajax.dataType,data:e.ajax.data,success:o.injectAjaxContent,error:o.injectAjaxError})},injectAjaxContent:function(t){o.getElement().find(".lolbox-contents").html(t),this.opt.ajax.callback&&this.opt.ajax.callback()},injectAjaxError:function(t){var e="<div class='lolbox-error'>";e+=t.statusText,e+="</div>",console.log(o.getElement()),o.getElement().find(".lolbox-contents").html(e),o.opt.ajax.callback&&this.opt.ajax.callback()},getHTML:function(){var t,o;return t=this.opt,o="<div id='lolbox'>",o+="<div class='lolbox lolbox-outer hide'></div>",o+="<div class='lolbox lolbox-inner hide'>",t.head.use&&(o+="<div class='lolbox-head'>",o+=t.head.title,t.head.close&&(o+="<div data-close>&times;</div>"),o+="</div>"),o+="<div class='lolbox-contents'>",o+=t.contents,o+="</div>",t.foot.use&&(o+="<div class='lolbox-footer'>",t.foot.close.use&&(o+="<button data-close>"+t.foot.close.text+"</button>"),t.foot.conf.use&&(o+="<button data-conf>"+t.foot.conf.text+"</button>"),o+="</div>"),o+="</div>"}};t.fn.lolbox=function(t){return o.init(this,t)}}(jQuery);